{% load static catalog_tags humanize %}
{% load menu_tags %}





{% comment %} <form id="filters-form" class="filters__wrapper">
    <div class="filters__box">
        {% for filter_group in available_filters %}
            <div class="filters__box-item" data-filter="{{ filter_group.category.slug }}">
                <span>{{ filter_group.category.name }}</span>
                <div class="arrow"></div>
                <div class="filters__dropdown hidden">
                    <div class="filters__search">
                        <input class="filters__search-input" type="text" placeholder="Поиск...">
                    </div>
                    {% for item in filter_group.values_with_status %}
                        <label class="{% if not item.is_available and not item.value.slug in active_filters|get_item:filter_group.category.slug %}disabled{% endif %}">
                            <input type="checkbox" name="{{ filter_group.category.slug }}" value="{{ item.value.slug }}"
                                {% if item.value.slug in active_filters|get_item:filter_group.category.slug %}checked{% endif %}
                                {% if not item.is_available and not item.value.slug in active_filters|get_item:filter_group.category.slug %}disabled{% endif %}>
                            {{ item.value.value }}
                        </label>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
    <div class="filters__box-reset">
        <span>Сбросить все</span>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.1476 18.3525C19.2029 18.404 19.2472 18.4661 19.278 18.5351C19.3087 18.6041 19.3252 18.6786 19.3266 18.7541C19.3279 18.8296 19.314 18.9047 19.2857 18.9747C19.2574 19.0447 19.2153 19.1084 19.1619 19.1618C19.1085 19.2152 19.0449 19.2573 18.9748 19.2856C18.9048 19.3139 18.8298 19.3278 18.7542 19.3265C18.6787 19.3251 18.6042 19.3086 18.5352 19.2778C18.4662 19.2471 18.4041 19.2028 18.3526 19.1475L12.0001 12.7959L5.64763 19.1475C5.541 19.2469 5.39996 19.301 5.25424 19.2984C5.10851 19.2958 4.96947 19.2368 4.86641 19.1337C4.76335 19.0307 4.70432 18.8916 4.70175 18.7459C4.69918 18.6002 4.75327 18.4591 4.85263 18.3525L11.2042 12L4.85263 5.64751C4.75327 5.54088 4.69918 5.39984 4.70175 5.25411C4.70432 5.10839 4.76335 4.96935 4.86641 4.86629C4.96947 4.76323 5.10851 4.7042 5.25424 4.70163C5.39996 4.69905 5.541 4.75315 5.64763 4.85251L12.0001 11.2041L18.3526 4.85251C18.4593 4.75315 18.6003 4.69905 18.746 4.70163C18.8917 4.7042 19.0308 4.76323 19.1338 4.86629C19.2369 4.96935 19.2959 5.10839 19.2985 5.25411C19.3011 5.39984 19.247 5.54088 19.1476 5.64751L12.7961 12L19.1476 18.3525Z"
                fill="#6A7D94"></path>
        </svg>
    </div>
</form> {% endcomment %}

<form method="get" class="filters__wrapper" id="filters-form">
    <div class="filters__box">

        {% for filter_group in available_filters %}
            <div class="filters__box-item" data-filter="{{ filter_group.category.slug }}">
                <span>
                    {{ filter_group.category.name }}{% if filter_group.category.unit %}, {{ filter_group.category.unit }}{% endif %}
                    
                    {% with selected_values=active_filters|get_item:filter_group.category.slug %}
                        {% if selected_values %}
                            <span class="filter-count">({{ selected_values|length }})</span>
                        {% endif %}
                    {% endwith %}
                </span>
                <div class="arrow"></div>

                <div class="filters__dropdown hidden">
                    <div class="search-box">
                        <input type="text" placeholder="Поиск..." class="filters__search-input">
                    </div>
                    <div class="filter-values-list">
                        {% for item in filter_group.values_with_status %}
                            
                            <label class="{% if not item.is_available and not item.value.slug in active_filters|get_item:filter_group.category.slug %}disabled{% endif %}">
                                
                                <input type="checkbox" 
                                    name="{{ filter_group.category.slug }}" 
                                    value="{{ item.value.slug }}"
                                    {% if item.value.slug in active_filters|get_item:filter_group.category.slug %}checked{% endif %}
                                    {% if not item.is_available and not item.value.slug in active_filters|get_item:filter_group.category.slug %}disabled{% endif %}>
                                
                                {{ item.value.value }}

                                {% if not item.is_available and not item.value.slug in active_filters|get_item:filter_group.category.slug %}
                                    <span class="disabled-filter-overlay"></span>
                                {% endif %}
                            </label>

                        {% endfor %}
                        <div class="filter-no-results-message" style="display: none;">Ничего не найдено</div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <div class="filters__box-reset">
        <span>Сбросить все</span>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.1476 18.3525C19.2029 18.404 19.2472 18.4661 19.278 18.5351C19.3087 18.6041 19.3252 18.6786 19.3266 18.7541C19.3279 18.8296 19.314 18.9047 19.2857 18.9747C19.2574 19.0447 19.2153 19.1084 19.1619 19.1618C19.1085 19.2152 19.0449 19.2573 18.9748 19.2856C18.9048 19.3139 18.8298 19.3278 18.7542 19.3265C18.6787 19.3251 18.6042 19.3086 18.5352 19.2778C18.4662 19.2471 18.4041 19.2028 18.3526 19.1475L12.0001 12.7959L5.64763 19.1475C5.541 19.2469 5.39996 19.301 5.25424 19.2984C5.10851 19.2958 4.96947 19.2368 4.86641 19.1337C4.76335 19.0307 4.70432 18.8916 4.70175 18.7459C4.69918 18.6002 4.75327 18.4591 4.85263 18.3525L11.2042 12L4.85263 5.64751C4.75327 5.54088 4.69918 5.39984 4.70175 5.25411C4.70432 5.10839 4.76335 4.96935 4.86641 4.86629C4.96947 4.76323 5.10851 4.7042 5.25424 4.70163C5.39996 4.69905 5.541 4.75315 5.64763 4.85251L12.0001 11.2041L18.3526 4.85251C18.4593 4.75315 18.6003 4.69905 18.746 4.70163C18.8917 4.7042 19.0308 4.76323 19.1338 4.86629C19.2369 4.96935 19.2959 5.10839 19.2985 5.25411C19.3011 5.39984 19.247 5.54088 19.1476 5.64751L12.7961 12L19.1476 18.3525Z" fill="#6A7D94"></path>
        </svg>
    </div>
</form>
